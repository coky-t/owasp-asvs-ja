# V8: エラー処理およびログ記録検証要件

## 管理目標

エラー処理とロギングの主な目的はユーザー、管理者、インシデントレスポンスチームによる有用なリアクションを提供することです。その目的は大量のログを作成することではなく、廃棄されるノイズよりもより多くのシグナルを持つ高品質のログを作成することです。

高品質のログは機密データを含むことが多く、地域ごとのデータプライバシー法や規制に従って保護する必要があります。これには以下が含まれます。

* 特に必要が場合には機密情報を収集や記録しません。
* 記録されたすべての情報がセキュアに処理され、そのデータ分類に従って保護されていることを確認します。
* ログは永続的ではなく、可能な限り短い絶対存続時間を持つことを確認します。

国ごとに定義が異なるプライベートデータや機密データをログに含む場合、そのログはアプリケーションにより保持される最も機密性の高い情報の一つとなり、攻撃者にとってそれ自体が非常に魅力的です。

## セキュリティ検証要件

| # | 説明 | L1 | L2 | L3 | 導入バージョン |
| --- | --- | --- | --- | -- | -- |
| **8.1** | 地域のプライバシー法や関連するセキュリティポリシーの下で定義されているように、アプリケーションが資格情報、セッショントークン、支払い明細、機密データをログに記録しないことを検証します。 |  | ✓ | ✓ | 3.0 |
| **8.2** | 成功および失敗した認証イベント、アクセス制御の失敗、入力検証の失敗など、セキュリティに関するイベントをアプリケーションがログに記録することを検証します。 | ✓ | ✓ | ✓ | 4.0 |
| **8.3** | 各ログイベントにはイベントが発生した時のタイムラインの詳細な調査を可能にするために必要な情報が含まれていることを検証します。 |  | ✓ | ✓ | 1.0 |
| **8.4** | ログ閲覧ソフトウェアで閲覧したときに、すべてのイベントはインジェクションから保護されていることを検証します。 |  | ✓ | ✓ | 1.0 |
| **8.5** | セキュリティログは不正なアクセスや改変から保護されていることを検証します。 |  | ✓ | ✓ | 1.0 |
| **8.6** | ログインジェクションを防ぐためにアプリケーションがユーザー提供のデータを適切にエンコードすることを検証します。 | ✓ | ✓ | ✓ | 4.0 |
| **8.7** | ログは分析、検出、アラート、エスカレーションのためにリモートシステムに送信されていることを検証します。 |  |  | ✓ | 4.0 |
| **8.8** | 時刻ソースが正しい時刻とタイムゾーンに同期していることを検証します。 | ✓ | ✓ | ✓ | 4.0 |
| **8.9** | 機密セッション識別子や記憶された秘密を格納することなく、すべての認証判定がログに記録されていることを検証します。これにはセキュリティ調査に必要な関連メタデータを伴うリクエストを含む必要があります。 | ✓ | ✓ | ✓ | 4.0 |

## 参考情報

詳細については、以下も参照してください。

* [OWASP Testing Guide 4.0 content: Testing for Error Handling](https://www.owasp.org/index.php/Testing_for_Error_Handling)
